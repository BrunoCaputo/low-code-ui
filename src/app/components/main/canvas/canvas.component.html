<div class="row col-md-12 text-left m-b-md" style="padding-right: 0 !important">
    <div class="col-md-6 text-left">
        <button
            type="button"
            class="btn m-r-md tab-btn"
            [class.btn-default]="isLogicContainer"
            [class.btn-primary]="!isLogicContainer"
            (click)="setLogicContainer(false)"
        >
            Interface
        </button>
        <button
            type="button"
            class="btn btn-default tab-btn"
            [class.btn-default]="!isLogicContainer"
            [class.btn-primary]="isLogicContainer"
            (click)="setLogicContainer(true)"
        >
            Lógica
        </button>
    </div>
    <div class="col-md-6 text-right" style="padding-right: 0 !important">
        <button
            type="button"
            class="btn btn-primary tab-btn"
            (click)="apply()"
            [disabled]="!isValid()"
        >
            Aplicar
        </button>
    </div>
</div>

<div id="gui" class="col-md-12" *ngIf="!isLogicContainer">
    <div class="screen" id="canvas">
        <div *ngFor="let e of elements; let i = index">
            <div
                *ngIf="e.type === 'container'"
                [ngStyle]="{
                    width: e.width,
                    height: e.height,
                    position: 'absolut',
                    border: 'solid'
                }"
                mwlResizable
                (click)="click($event, $event.target)"
                cdkDrag
                cdkDragBoundary=".screen"
                [id]="e.name"
            ></div>
            <button
                *ngIf="e.type === 'button'"
                class="btn btn-default draggable"
                [id]="e.name"
                (click)="click($event, $event.target)"
                (dblclick)="onDoubleClick($event, $event.target)"
                cdkDrag
                cdkDragBoundary=".screen"
            >
                Botão
            </button>
            <p
                *ngIf="e.type === 'label'"
                class="draggable"
                [id]="e.name"
                (click)="click($event, $event.target)"
                cdkDrag
                cdkDragBoundary=".screen"
            >
                Novo Label
            </p>
            <input
                *ngIf="e.type === 'input'"
                class="draggable input-field"
                [id]="e.name"
                (click)="click($event, $event.target)"
                cdkDrag
                cdkDragBoundary=".screen"
            />
        </div>
    </div>
</div>

<div id="logic" class="col-md-12" *ngIf="isLogicContainer">
    <div class="ibox">
        <div class="ibox-title">
            <div class="ibox-tools">
                <div class="row-flex">
                    <h4 class="add-title">Nova função</h4>
                    <button
                        type="button"
                        class="btn btn-primary add-btn m-l-sm"
                        (click)="addAction()"
                    >
                        <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
        </div>
        <div class="ibox-content">
            <div
                class="ibox"
                *ngFor="let func of logicElements; let funcIndex = index"
            >
                <form role="form" [formGroup]="getCurFunction(funcIndex)">
                    <div class="ibox-title inside-ibox">
                        <div class="column col-md-12">
                            <div class="row">
                                <select
                                    class="form-control col-3"
                                    formControlName="returnType"
                                    *ngIf="funcIndex !== 0"
                                >
                                    <option value="void">Void</option>
                                    <option value="adt">Algébrico</option>
                                    <option value="array">Array</option>
                                    <option value="bool">Booleano</option>
                                    <option value="char">Caracter</option>
                                    <option value="double">Double</option>
                                    <option value="integer">Inteiro</option>
                                    <option value="record">Registro</option>
                                    <option value="text">Texto</option>
                                </select>
                                <input
                                    class="m-l-sm form-control col-4"
                                    type="text"
                                    placeholder="Noma da função"
                                    [value]="func.funcName"
                                    formControlName="funcName"
                                    [attr.readOnly]="func.readonly ? '' : null"
                                />
                                <button
                                    *ngIf="funcIndex !== 0"
                                    type="button"
                                    class="btn btn-primary add-btn m-l-sm"
                                    (click)="addParameterToFunction(funcIndex)"
                                >
                                    <i class="fa fa-plus"></i>
                                </button>
                            </div>

                            <div
                                class="row m-t-sm"
                                *ngFor="
                                    let param of getFunctionParams(funcIndex)
                                        .controls;
                                    let i = index
                                "
                                [formGroup]="param"
                            >
                                <select
                                    class="form-control col-3"
                                    formControlName="paramType"
                                >
                                    <option value="adt">Algébrico</option>
                                    <option value="array">Array</option>
                                    <option value="bool">Booleano</option>
                                    <option value="char">Caracter</option>
                                    <option value="double">Double</option>
                                    <option value="integer">Inteiro</option>
                                    <option value="record">Registro</option>
                                    <option value="text">Texto</option>
                                </select>
                                <input
                                    type="text"
                                    class="form-control col-4 m-l-sm"
                                    formControlName="paramName"
                                    placeholder="Nome do parâmetro"
                                />
                                <button
                                    *ngIf="funcIndex !== 0"
                                    class="m-l-sm btn btn-remove"
                                    (click)="
                                        removeParameterFromFunction(
                                            funcIndex,
                                            i
                                        )
                                    "
                                >
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>

                        <div class="ibox-tools">
                            <div class="row-flex">
                                <h4 class="add-title">Novo item</h4>
                                <button
                                    *ngIf="funcIndex === 0"
                                    type="button"
                                    class="btn btn-primary add-btn m-l-sm dropdown-toggle"
                                    data-toggle="dropdown"
                                >
                                    <i class="fa fa-plus"></i>
                                </button>
                                <ul
                                    class="dropdown-menu create-item"
                                    *ngIf="funcIndex === 0"
                                >
                                    <li
                                        (click)="
                                            createItem(func.funcName, 'cl')
                                        "
                                    >
                                        <a> Linha de comando </a>
                                    </li>
                                    <li *ngIf="funcIndex === 0">
                                        <a
                                            (click)="
                                                createItem(func.funcName, 'evt')
                                            "
                                        >
                                            Evento
                                        </a>
                                    </li>
                                </ul>

                                <button
                                    *ngIf="funcIndex !== 0"
                                    type="button"
                                    class="btn btn-primary add-btn m-l-sm"
                                    (click)="createItem(func.funcName, 'cl')"
                                >
                                    <i class="fa fa-plus"></i>
                                </button>

                                <button
                                    *ngIf="funcIndex !== 0"
                                    class="m-l-md btn btn-remove"
                                    (click)="removeFunc(funcIndex)"
                                >
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="ibox-content">
                        <div
                            class="col-md-12 m-b-md m-t-sm"
                            *ngFor="
                                let cl of func.commandLine;
                                let funcClIndex = index
                            "
                        >
                            <div class="column">
                                <div class="row">
                                    <div class="col-md-3">
                                        <select
                                            class="form-control"
                                            (change)="
                                                funcClTypeChange(
                                                    $event.target.value,
                                                    false,
                                                    func.funcName,
                                                    funcClIndex,
                                                    -1
                                                )
                                            "
                                        >
                                            <option value="decision">
                                                Decisão
                                            </option>
                                            <option value="repetition">
                                                Repetição
                                            </option>
                                            <option value="declaration">
                                                Declaração
                                            </option>
                                            <option value="call">
                                                Chamada de Função
                                            </option>
                                            <option value="attribution">
                                                Atribuição
                                            </option>
                                            <option value="htmlElement">
                                                Elemento HTML
                                            </option>
                                            <option
                                                value="return"
                                                *ngIf="funcIndex !== 0"
                                            >
                                                Retorno
                                            </option>
                                            <option value="console">
                                                Console
                                            </option>
                                        </select>
                                    </div>
                                    <div class="col-md-8">
                                        <ng-container
                                            *ngIf="
                                                cl.type.name === 'declaration'
                                            "
                                            [ngTemplateOutlet]="declaration"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                        <ng-container
                                            *ngIf="cl.type.name === 'call'"
                                            [ngTemplateOutlet]="call"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                        <ng-container
                                            *ngIf="
                                                cl.type.name === 'attribution'
                                            "
                                            [ngTemplateOutlet]="attribution"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                        <ng-container
                                            *ngIf="
                                                cl.type.name === 'htmlElement'
                                            "
                                            [ngTemplateOutlet]="htmlElement"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                        <ng-container
                                            *ngIf="cl.type.name === 'return'"
                                            [ngTemplateOutlet]="return"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                        <ng-container
                                            *ngIf="cl.type.name === 'console'"
                                            [ngTemplateOutlet]="console"
                                            [ngTemplateOutletContext]="{
                                                index: funcClIndex,
                                                evtIndex: -1,
                                                isEvt: false,
                                                funcName: func.funcName
                                            }"
                                        ></ng-container>
                                    </div>
                                    <div class="col-md-1">
                                        <button
                                            class="m-l-md btn btn-remove"
                                            (click)="
                                                removeItem(
                                                    func.funcName,
                                                    'cl',
                                                    funcClIndex
                                                )
                                            "
                                        >
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-12 no-h-padding">
                                    <ng-container
                                        *ngIf="cl.type.name === 'decision'"
                                        [ngTemplateOutlet]="ifDecision"
                                        [ngTemplateOutletContext]="{
                                            index: funcClIndex,
                                            evtIndex: -1,
                                            isEvt: false,
                                            funcName: func.funcName,
                                            cascade: false
                                        }"
                                    ></ng-container>
                                    <ng-container
                                        *ngIf="cl.type.name === 'repetition'"
                                        [ngTemplateOutlet]="whileLoop"
                                        [ngTemplateOutletContext]="{
                                            index: funcClIndex,
                                            evtIndex: -1,
                                            isEvt: false,
                                            funcName: func.funcName,
                                            cascade: false
                                        }"
                                    ></ng-container>
                                </div>
                            </div>
                        </div>
                        <div
                            class="col-md-12 m-b-md m-t-sm"
                            *ngFor="
                                let evt of func.events;
                                let evtIndex = index
                            "
                        >
                            <div class="ibox">
                                <div class="ibox-title inside-ibox">
                                    <h5 class="func-name">Componente:</h5>
                                    <select
                                        class="m-l-sm form-control"
                                        style="width: 150px"
                                    >
                                        <option
                                            *ngFor="let element of elements"
                                            [value]="element.name"
                                        >
                                            {{ element.name }}
                                        </option>
                                    </select>
                                    <select
                                        class="m-l-sm form-control"
                                        style="width: 150px"
                                        (change)="
                                            changeEventType(
                                                $event.target.value,
                                                evtIndex
                                            )
                                        "
                                    >
                                        <option value="onClick">Click</option>
                                        <option value="onDoubleClick">
                                            Double Click
                                        </option>
                                        <option value="onChange">Change</option>
                                    </select>
                                    <div class="ibox-tools">
                                        <div class="row-flex">
                                            <h4 class="add-title">
                                                Nova linha de comando
                                            </h4>
                                            <button
                                                type="button"
                                                class="btn btn-primary add-btn m-l-sm"
                                                (click)="
                                                    createEvtCl(
                                                        evt.eventName,
                                                        func.funcName
                                                    )
                                                "
                                            >
                                                <i class="fa fa-plus"></i>
                                            </button>
                                            <button
                                                class="m-l-md btn btn-remove"
                                                (click)="
                                                    removeItem(
                                                        func.funcName,
                                                        'evt',
                                                        evtIndex
                                                    )
                                                "
                                            >
                                                <i class="fa fa-trash"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="ibox-content">
                                <div
                                    class="col-md-12 m-b-md m-t-sm"
                                    *ngFor="
                                        let cl of evt.commandLine;
                                        let evtClIndex = index
                                    "
                                >
                                    <div class="column">
                                        <div class="row">
                                            <div class="col-md-3">
                                                <select
                                                    class="form-control"
                                                    (change)="
                                                        funcClTypeChange(
                                                            $event.target.value,
                                                            true,
                                                            func.funcName,
                                                            evtClIndex,
                                                            evtIndex
                                                        )
                                                    "
                                                >
                                                    <option value="decision">
                                                        Decisão
                                                    </option>
                                                    <option value="repetition">
                                                        Repetição
                                                    </option>
                                                    <option value="declaration">
                                                        Declaração
                                                    </option>
                                                    <option value="call">
                                                        Chamada de Função
                                                    </option>
                                                    <option value="attribution">
                                                        Atribuição
                                                    </option>
                                                    <option value="htmlElement">
                                                        Elemento HTML
                                                    </option>
                                                    <option value="console">
                                                        Console
                                                    </option>
                                                </select>
                                            </div>
                                            <div class="col-md-8">
                                                <ng-container
                                                    *ngIf="
                                                        cl.type.name ===
                                                        'declaration'
                                                    "
                                                    [ngTemplateOutlet]="
                                                        declaration
                                                    "
                                                    [ngTemplateOutletContext]="{
                                                        index: evtClIndex,
                                                        evtIndex: evtIndex,
                                                        isEvt: true,
                                                        funcName: func.funcName
                                                    }"
                                                ></ng-container>
                                                <ng-container
                                                    *ngIf="
                                                        cl.type.name === 'call'
                                                    "
                                                    [ngTemplateOutlet]="call"
                                                    [ngTemplateOutletContext]="{
                                                        index: evtClIndex,
                                                        evtIndex: evtIndex,
                                                        isEvt: true,
                                                        funcName: func.funcName
                                                    }"
                                                ></ng-container>
                                                <ng-container
                                                    *ngIf="
                                                        cl.type.name ===
                                                        'attribution'
                                                    "
                                                    [ngTemplateOutlet]="
                                                        attribution
                                                    "
                                                    [ngTemplateOutletContext]="{
                                                        index: evtClIndex,
                                                        evtIndex: evtIndex,
                                                        isEvt: true,
                                                        funcName: func.funcName
                                                    }"
                                                ></ng-container>
                                                <ng-container
                                                    *ngIf="
                                                        cl.type.name ===
                                                        'htmlElement'
                                                    "
                                                    [ngTemplateOutlet]="
                                                        htmlElement
                                                    "
                                                    [ngTemplateOutletContext]="{
                                                        index: evtClIndex,
                                                        evtIndex: evtIndex,
                                                        isEvt: true,
                                                        funcName: func.funcName
                                                    }"
                                                ></ng-container>
                                                <ng-container
                                                    *ngIf="
                                                        cl.type.name ===
                                                        'console'
                                                    "
                                                    [ngTemplateOutlet]="console"
                                                    [ngTemplateOutletContext]="{
                                                        index: evtClIndex,
                                                        evtIndex: evtIndex,
                                                        isEvt: true,
                                                        funcName: func.funcName
                                                    }"
                                                ></ng-container>
                                            </div>
                                            <div class="col-md-1">
                                                <button
                                                    class="m-l-md btn btn-remove"
                                                    (click)="
                                                        removeEvtCl(
                                                            evt.eventName,
                                                            evtClIndex
                                                        )
                                                    "
                                                >
                                                    <i class="fa fa-trash"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-md-12 no-h-padding">
                                            <ng-container
                                                *ngIf="
                                                    cl.type.name === 'decision'
                                                "
                                                [ngTemplateOutlet]="ifDecision"
                                                [ngTemplateOutletContext]="{
                                                    index: evtClIndex,
                                                    evtIndex: evtIndex,
                                                    isEvt: true,
                                                    funcName: func.funcName,
                                                    cascade: false
                                                }"
                                            ></ng-container>
                                            <ng-container
                                                *ngIf="
                                                    cl.type.name ===
                                                    'repetition'
                                                "
                                                [ngTemplateOutlet]="whileLoop"
                                                [ngTemplateOutletContext]="{
                                                    index: evtClIndex,
                                                    evtIndex: evtIndex,
                                                    isEvt: true,
                                                    funcName: func.funcName,
                                                    cascade: false
                                                }"
                                            ></ng-container>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<div class="col-12 text-right">
    <button
        type="button"
        class="btn btn-primary m-t-sm tab-btn"
        [disabled]="!isValid()"
        (click)="apply()"
    >
        Aplicar
    </button>
</div>

<ng-template
    #ifDecision
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
    let-cascade="cascade"
>
    <form
        role="form"
        [formGroup]="
            getDecisionFormGroup(index, isEvt, evtIndex, funcName, cascade)
        "
    >
        <div class="ibox">
            <div class="ibox-title inside-ibox">
                <div class="row col-md-12 m-b-sm">
                    <div class="col-1 m-h-auto">Se</div>
                    <div class="col-3">
                        <select
                            class="form-control"
                            (change)="
                                changeIfCondition(
                                    $event.target.value,
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                )
                            "
                        >
                            <option value="comparison">Comparação</option>
                            <option value="booleanLogic">
                                Lógica Booleana
                            </option>
                            <option value="custom">Customizado</option>
                        </select>
                    </div>
                    <div class="col-8">
                        <ng-container
                            *ngIf="
                                ifCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'comparison'
                            "
                            [ngTemplateOutlet]="comparison"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                        <ng-container
                            *ngIf="
                                ifCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'booleanLogic'
                            "
                            [ngTemplateOutlet]="booleanLogic"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                        <ng-container
                            *ngIf="
                                ifCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'custom'
                            "
                            [ngTemplateOutlet]="custom"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                    </div>
                </div>
                <div class="ibox-tools">
                    <button
                        type="button"
                        class="btn btn-primary add-btn m-l-sm"
                        (click)="
                            addClToDecisionBranch(
                                'trueBranch',
                                funcName,
                                isEvt,
                                index,
                                evtIndex,
                                cascade
                            )
                        "
                    >
                        <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="ibox-content no-h-padding">
                <div
                    class="col-md-12 m-b-md m-t-sm"
                    *ngFor="
                        let cl of getTrueBranch(
                            index,
                            isEvt,
                            evtIndex,
                            funcName,
                            cascade
                        ).controls;
                        let ifClIndex = index
                    "
                >
                    <div class="column">
                        <div class="row">
                            <div class="col-md-3">
                                <select class="form-control">
                                    <option value="decision">Decisão</option>
                                    <option value="repetition">
                                        Repetição
                                    </option>
                                    <option value="declaration">
                                        Declaração
                                    </option>
                                    <option value="call">
                                        Chamada de Função
                                    </option>
                                    <option value="attribution">
                                        Atribuição
                                    </option>
                                    <option value="return">Retorno</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'declaration'
                                    "
                                    [ngTemplateOutlet]="declaration"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'call'
                                    "
                                    [ngTemplateOutlet]="call"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'attribution'
                                    "
                                    [ngTemplateOutlet]="attribution"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'return'
                                    "
                                    [ngTemplateOutlet]="return"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                            </div>
                            <div class="col-md-1">
                                <button
                                    class="m-l-md btn btn-remove"
                                    (click)="
                                        removeClFromDecisionBranch(
                                            'trueBranch',
                                            cl,
                                            ifClIndex
                                        )
                                    "
                                >
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-12 no-h-padding">
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'decision'
                                "
                                [ngTemplateOutlet]="ifDecision"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName,
                                    cascade: true
                                }"
                            ></ng-container>
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'repetition'
                                "
                                [ngTemplateOutlet]="whileLoop"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName
                                }"
                            ></ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ibox">
            <div class="ibox-title inside-ibox">
                <div class="col-3 m-h-auto">Senão</div>
                <div class="ibox-tools">
                    <button
                        type="button"
                        class="btn btn-primary add-btn m-l-sm"
                        (click)="
                            addClToDecisionBranch(
                                'falseBranch',
                                funcName,
                                isEvt,
                                index,
                                evtIndex,
                                cascade
                            )
                        "
                    >
                        <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="ibox-content no-h-padding">
                <div
                    class="col-md-12 m-b-md m-t-sm"
                    *ngFor="
                        let cl of getFalseBranch(
                            index,
                            isEvt,
                            evtIndex,
                            funcName,
                            cascade
                        ).controls;
                        let ifClIndex = index
                    "
                >
                    <div class="column">
                        <div class="row">
                            <div class="col-md-3">
                                <select class="form-control">
                                    <option value="decision">Decisão</option>
                                    <option value="repetition">
                                        Repetição
                                    </option>
                                    <option value="declaration">
                                        Declaração
                                    </option>
                                    <option value="call">
                                        Chamada de Função
                                    </option>
                                    <option value="attribution">
                                        Atribuição
                                    </option>
                                    <option value="return">Retorno</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'declaration'
                                    "
                                    [ngTemplateOutlet]="declaration"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'call'
                                    "
                                    [ngTemplateOutlet]="call"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'attribution'
                                    "
                                    [ngTemplateOutlet]="attribution"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'return'
                                    "
                                    [ngTemplateOutlet]="return"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                            </div>
                            <div class="col-md-1">
                                <button
                                    class="m-l-md btn btn-remove"
                                    (click)="
                                        removeClFromDecisionBranch(
                                            'falseBranch',
                                            cl,
                                            ifClIndex
                                        )
                                    "
                                >
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-12 no-h-padding">
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'decision'
                                "
                                [ngTemplateOutlet]="ifDecision"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName,
                                    cascade: true
                                }"
                            ></ng-container>
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'repetition'
                                "
                                [ngTemplateOutlet]="whileLoop"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName
                                }"
                            ></ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #whileLoop
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
    let-cascade="cascade"
>
    <form
        role="form"
        [formGroup]="
            getRepetitionFormGroup(index, isEvt, evtIndex, funcName, cascade)
        "
    >
        <div class="ibox">
            <div class="ibox-title inside-ibox">
                <div class="row col-md-12 m-b-sm">
                    <div class="col-1 m-h-auto">Enquanto</div>
                    <div class="col-3">
                        <select
                            class="form-control"
                            (change)="
                                changeWhileLoop(
                                    $event.target.value,
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                )
                            "
                        >
                            <option value="comparison">Comparação</option>
                            <option value="booleanLogic">
                                Lógica Booleana
                            </option>
                            <option value="custom">Customizado</option>
                        </select>
                    </div>
                    <div class="col-8">
                        <ng-container
                            *ngIf="
                                whileLoopCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'comparison'
                            "
                            [ngTemplateOutlet]="comparison"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                        <ng-container
                            *ngIf="
                                whileLoopCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'booleanLogic'
                            "
                            [ngTemplateOutlet]="booleanLogic"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                        <ng-container
                            *ngIf="
                                whileLoopCondition(
                                    funcName,
                                    isEvt,
                                    index,
                                    evtIndex
                                ) === 'custom'
                            "
                            [ngTemplateOutlet]="custom"
                            [ngTemplateOutletContext]="{
                                index: index,
                                evtIndex: evtIndex,
                                isEvt: isEvt,
                                funcName: funcName
                            }"
                        ></ng-container>
                    </div>
                </div>
                <div class="ibox-tools">
                    <button
                        type="button"
                        class="btn btn-primary add-btn m-l-sm"
                        (click)="
                            addClToRepetition(
                                funcName,
                                isEvt,
                                index,
                                evtIndex,
                                cascade
                            )
                        "
                    >
                        <i class="fa fa-plus"></i>
                    </button>
                </div>
            </div>
            <div class="ibox-content no-h-padding">
                <div
                    class="col-md-12 m-b-md m-t-sm"
                    *ngFor="
                        let cl of getWhileAst(
                            index,
                            isEvt,
                            evtIndex,
                            funcName,
                            cascade
                        ).controls;
                        let ifClIndex = index
                    "
                >
                    <div class="column">
                        <div class="row">
                            <div class="col-md-3">
                                <select class="form-control">
                                    <option value="decision">Decisão</option>
                                    <option value="repetition">
                                        Repetição
                                    </option>
                                    <option value="declaration">
                                        Declaração
                                    </option>
                                    <option value="call">
                                        Chamada de Função
                                    </option>
                                    <option value="attribution">
                                        Atribuição
                                    </option>
                                    <option value="return">Retorno</option>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'declaration'
                                    "
                                    [ngTemplateOutlet]="declaration"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'call'
                                    "
                                    [ngTemplateOutlet]="call"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value ===
                                        'attribution'
                                    "
                                    [ngTemplateOutlet]="attribution"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                                <ng-container
                                    *ngIf="
                                        cl.get('clTypeName').value === 'return'
                                    "
                                    [ngTemplateOutlet]="return"
                                    [ngTemplateOutletContext]="{
                                        index: ifClIndex,
                                        evtIndex: -1,
                                        isEvt: false,
                                        funcName: funcName
                                    }"
                                ></ng-container>
                            </div>
                            <div class="col-md-1">
                                <button
                                    class="m-l-md btn btn-remove"
                                    (click)="
                                        removeClFromRepetition(cl, ifClIndex)
                                    "
                                >
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-12 no-h-padding">
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'decision'
                                "
                                [ngTemplateOutlet]="ifDecision"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName,
                                    cascade: true
                                }"
                            ></ng-container>
                            <ng-container
                                *ngIf="
                                    cl.get('clTypeName').value === 'repetition'
                                "
                                [ngTemplateOutlet]="whileLoop"
                                [ngTemplateOutletContext]="{
                                    index: ifClIndex,
                                    evtIndex: -1,
                                    isEvt: false,
                                    funcName: funcName,
                                    cascade: true
                                }"
                            ></ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #declaration
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        [formGroup]="getDeclarationFormGroup(index, isEvt, evtIndex, funcName)"
        role="form"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-4">
                    <select
                        class="form-control"
                        formControlName="varType"
                        (change)="
                            onChangeVarType(
                                $event.target.value,
                                index,
                                isEvt,
                                evtIndex,
                                funcName
                            )
                        "
                    >
                        <option value="adt">Algébrico</option>
                        <option value="array">Array</option>
                        <option value="bool">Booleano</option>
                        <option value="char">Caracter</option>
                        <option value="double">Double</option>
                        <option value="integer">Inteiro</option>
                        <option value="record">Registro</option>
                        <option value="text">Texto</option>
                    </select>
                </div>
                <div class="col-4">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="varName"
                        placeholder="Nome"
                    />
                </div>
                <div class="col-4">
                    <select
                        class="form-control"
                        formControlName="varValue"
                        *ngIf="
                            getDeclarationFormGroup(
                                index,
                                isEvt,
                                evtIndex,
                                funcName
                            ).get('varType').value === 'bool'
                        "
                    >
                        <option value="true">True</option>
                        <option value="false">False</option>
                    </select>
                    <input
                        type="text"
                        class="form-control"
                        formControlName="varValue"
                        placeholder="Valor"
                        *ngIf="
                            getDeclarationFormGroup(
                                index,
                                isEvt,
                                evtIndex,
                                funcName
                            ).get('varType').value !== 'bool'
                        "
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #comparison
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        [formGroup]="getComparisonFormGroup(index, isEvt, evtIndex, funcName)"
        role="form"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-5">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="leftExpression"
                    />
                </div>
                <div class="col-2">
                    <select
                        class="form-control"
                        style="padding: 0 0 0 5px"
                        formControlName="symbol"
                    >
                        <option value="Different">&ne;</option>
                        <option value="Equal">=</option>
                        <option value="Greater">></option>
                        <option value="GreaterEqual">&ge;</option>
                        <option value="Less"><</option>
                        <option value="LessEqual">&le;</option>
                    </select>
                </div>
                <div class="col-5">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="rightExpression"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #booleanLogic
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        [formGroup]="getBooleanLogicFormGroup(index, isEvt, evtIndex, funcName)"
        role="form"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-5">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="leftExpression"
                    />
                </div>
                <div class="col-2">
                    <select
                        class="form-control"
                        style="padding: 0 0 0 5px"
                        formControlName="symbol"
                    >
                        <option value="And">and</option>
                        <option value="Or">or</option>
                        <option value="Not">not</option>
                    </select>
                </div>
                <div class="col-5">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="rightExpression"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #custom
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        [formGroup]="
            getCustomConditionFormGroup(index, isEvt, evtIndex, funcName)
        "
        role="form"
    >
        <div class="col-md-12">
            <input
                type="text"
                class="form-control"
                formControlName="customCondition"
            />
        </div>
    </form>
</ng-template>

<ng-template
    #call
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        role="form"
        [formGroup]="getCallFuncFormGroup(index, isEvt, evtIndex, funcName)"
    >
        <div class="col-md-12 column">
            <div class="row">
                <div class="col-3">
                    <select class="form-control" formControlName="returnType">
                        <option value="with-return">Atribuição</option>
                        <option value="without-return">Execução</option>
                    </select>
                </div>
                <div
                    class="col-4"
                    *ngIf="
                        callFuncChangeReturnType(
                            index,
                            isEvt,
                            evtIndex,
                            funcName
                        ) === 'with-return'
                    "
                >
                    <select class="form-control" formControlName="varName">
                        <ng-container
                            *ngFor="
                                let variable of declarationArrayData.controls;
                                let i = index
                            "
                        >
                            <option
                                [value]="variable.get('varName').value"
                                *ngIf="
                                    variable.get('funcName').value === funcName
                                "
                            >
                                {{ variable.get("varName").value }}
                            </option>
                        </ng-container>
                    </select>
                </div>
                <div
                    class="col-5"
                    [class.col-9]="
                        callFuncChangeReturnType(
                            index,
                            isEvt,
                            evtIndex,
                            funcName
                        ) === 'without-return'
                    "
                >
                    <select
                        class="form-control"
                        formControlName="function"
                        (change)="
                            onChangeCallFunction(
                                $event.target.value,
                                index,
                                isEvt,
                                evtIndex,
                                funcName
                            )
                        "
                    >
                        <ng-container
                            *ngFor="
                                let func of formData.controls;
                                let i = index
                            "
                        >
                            <option
                                [value]="func.get('funcName').value"
                                *ngIf="i !== 0"
                            >
                                {{ func.get("funcName").value }}
                            </option>
                        </ng-container>
                    </select>
                </div>
            </div>
            <div
                class="row m-t-sm"
                *ngFor="
                    let param of getParamentersArrayData(
                        index,
                        isEvt,
                        evtIndex,
                        funcName
                    ).controls;
                    let i = index
                "
                [formGroup]="param"
            >
                <div class="col-3 text-center m-h-auto">
                    <h4 *ngIf="i === 0">Parâmetros</h4>
                </div>
                <div class="col-4 text-center m-h-auto">
                    <h4>
                        {{ param.value["paramName"] }}
                    </h4>
                </div>
                <div class="col-5">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="paramValue"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #attribution
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        role="form"
        [formGroup]="getAttributionFormGroup(index, isEvt, evtIndex, funcName)"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-5">
                    <select class="form-control" formControlName="varName">
                        <ng-container
                            *ngFor="
                                let variable of declarationArrayData.controls;
                                let i = index
                            "
                        >
                            <option
                                [value]="
                                    variable.get('varName').value +
                                    '-' +
                                    variable.get('varType').value
                                "
                                *ngIf="
                                    variable.get('funcName').value === funcName
                                "
                            >
                                {{ variable.get("varName").value }}
                            </option>
                        </ng-container>
                    </select>
                </div>
                <div class="col-7">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="attributionValue"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #htmlElement
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        role="form"
        [formGroup]="getHtmlElementFormGroup(index, isEvt, evtIndex, funcName)"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-2 text-center m-auto">
                    <div>Buscar por ID:</div>
                </div>
                <div class="col-3">
                    <select class="form-control" formControlName="elementName">
                        <option
                            *ngFor="let element of elements"
                            [value]="element.name?.trim()"
                        >
                            {{ element.name?.trim() }}
                        </option>
                    </select>
                </div>
                <div class="col-3">
                    <select class="form-control" formControlName="elementData">
                        <option value="id">ID</option>
                        <option value="addClass">Adicionar Classe</option>
                        <option value="removeClass">Remover Classe</option>
                        <option value="text">Texto</option>
                        <option value="value">Valor</option>
                    </select>
                </div>
                <div class="col-4">
                    <input
                        type="text"
                        required
                        class="form-control"
                        formControlName="elementValue"
                        placeholder="novo valor"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>

<ng-template
    #return
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        role="form"
        [formGroup]="getReturnFormGroup(index, isEvt, evtIndex, funcName)"
    >
        <div class="col-md-12">
            <input
                type="text"
                class="form-control"
                formControlName="returnValue"
            />
        </div>
    </form>
</ng-template>

<ng-template
    #console
    let-index="index"
    let-evtIndex="evtIndex"
    let-isEvt="isEvt"
    let-funcName="funcName"
>
    <form
        role="form"
        [formGroup]="getConsoleFormGroup(index, isEvt, evtIndex, funcName)"
    >
        <div class="col-md-12">
            <div class="row">
                <div class="col-3">
                    <select class="form-control" formControlName="consoleType">
                        <option value="log">Log</option>
                        <option value="error">Error</option>
                        <option value="warning">Warning</option>
                    </select>
                </div>
                <div class="col-9">
                    <input
                        type="text"
                        class="form-control"
                        formControlName="consoleText"
                    />
                </div>
            </div>
        </div>
    </form>
</ng-template>
